(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var r=t(15),a=t.n(r),c=t(6),o=t(3),i=t(1),u=t(0),l=function(e){var n=e.filter,t=e.handleFilter;return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{value:n,onChange:t})]})},d=function(e){var n=e.nameValue,t=e.nameHandler,r=e.numberValue,a=e.numberHandler,c=e.clickHandler;return Object(u.jsxs)("form",{children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:t})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:r,onChange:a})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",onClick:c,children:"add"})})]})},s=function(e){var n=e.persons,t=e.filter,r=e.handleDelete;return n.filter((function(e){return e.name.toLowerCase().includes(t)})).map((function(e){return Object(u.jsxs)("div",{children:[e.name," ",e.number,Object(u.jsx)("button",{name:e.name,id:e.id,onClick:r,children:"delete "})]},e.name)}))},f={Notification:function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{style:{color:"green",background:"lightgray",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},ErrorNotification:function(e){var n=e.errorMessage;return null===n?null:Object(u.jsx)("div",{style:{color:"red",background:"lightgray",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})}},b=t(4),j=t.n(b),m="/api/persons",h={getAll:function(){return j.a.get(m).then((function(e){return e.data}))},create:function(e){return j.a.post(m,e).then((function(e){return e.data}))},remove:function(e){return j.a.delete("".concat(m,"/").concat(e))},update:function(e,n){return j.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))}},O=function(){var e=Object(i.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(i.useState)(""),b=Object(o.a)(a,2),j=b[0],m=b[1],O=Object(i.useState)(""),g=Object(o.a)(O,2),p=g[0],v=g[1],x=Object(i.useState)(""),k=Object(o.a)(x,2),w=k[0],y=k[1],S=Object(i.useState)(null),C=Object(o.a)(S,2),H=C[0],N=C[1],T=Object(i.useState)(null),A=Object(o.a)(T,2),D=A[0],E=A[1];Object(i.useEffect)((function(){h.getAll().then((function(e){r(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(f.Notification,{message:H}),Object(u.jsx)(f.ErrorNotification,{errorMessage:D}),Object(u.jsx)(l,{filter:w,handleFilter:function(e){y(e.target.value)}}),Object(u.jsx)("h2",{children:"Add a new number"}),Object(u.jsx)(d,{nameValue:j,nameHandler:function(e){m(e.target.value)},numberValue:p,numberHandler:function(e){v(e.target.value)},clickHandler:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(j)){if(window.confirm("".concat(j," is a already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===j}));h.update(n.id,Object(c.a)(Object(c.a)({},n),{},{number:p})).then((function(e){N("Updated ".concat(j)),setTimeout((function(){N(null)}),5e3);var n=t.filter((function(e){return e.name!==j}));return r(n.concat(e))})).catch((function(e){E(e.response.data),setTimeout((function(){E(null)}),5e3)}))}}else h.create({name:j,number:p}).then((function(e){r(t.concat(e)),N("Added ".concat(j)),setTimeout((function(){N(null)}),5e3)})).catch((function(e){E(e.response.data),setTimeout((function(){E(null)}),5e3)}));m(""),v("")}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(s,{filter:w,persons:t,handleDelete:function(e){window.confirm("Delete ".concat(e.target.name,"?"))&&h.remove(e.target.id).then((function(){r(t.filter((function(n){return n.name!==e.target.name})))})).catch((function(n){E("Information of ".concat(e.target.name," has already been removed from server")),setTimeout((function(){E(null)}),5e3),r(t.filter((function(n){return n.name!==e.target.name})))}))}})]})};a.a.render(Object(u.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.2b76f69e.chunk.js.map